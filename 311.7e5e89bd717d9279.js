"use strict";(self.webpackChunkmill_shop=self.webpackChunkmill_shop||[]).push([[311],{7716:(y,p,o)=>{o.r(p),o.d(p,{HomeComponent:()=>c});var e=o(4438),h=o(9079),m=o(2820),u=o(6354),f=o(1806);const C=f.J1`
  query getHomePage {
    page(where: { slug: "home-page" }) {
      pageTitle
      header
      slug
      banner {
        url
        fileName
      }
    }
  }
`,d=f.J1`
  query {
    categories(first: 3, orderBy: name_ASC) {
      id
      slug
      name
      image {
        url
        fileName
      }
      product {
        slug
      }
    }
  }
`;class g{static createHomePage(s){return{pageTitle:s.pageTitle,header:s.header,slug:s.slug,banner:{url:s.banner.url,fileName:s.banner.fileName}}}}var v=o(7653);let _=(()=>{class t{graphql=(0,e.WQX)(m.P);getHomePageData(){return this.graphql.query(C,{fetchPolicy:"cache-first"}).pipe((0,u.T)(a=>g.createHomePage(a.page)))}getTopCategories(){return this.graphql.query(d,{fetchPolicy:"cache-first"}).pipe((0,u.T)(a=>a.categories.map(v.i.createCategory)))}static \u0275fac=function(l){return new(l||t)};static \u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),O=(()=>{class t{homeApiService=(0,e.WQX)(_);homeResource=(0,h.ZX)({loader:()=>this.homeApiService.getHomePageData()});topCategoriesResource=(0,h.ZX)({loader:()=>this.homeApiService.getTopCategories()});homePageSignal=this.homeResource.value;loadingSignal=this.homeResource.isLoading;errorSignal=this.homeResource.error;topCategoriesSignal=this.topCategoriesResource.value;topLoadingSignal=this.topCategoriesResource.isLoading;topErrorSignal=this.topCategoriesResource.error;loadHomePage(){this.homeResource.reload()}getTopCategories(){this.topCategoriesResource.reload()}static \u0275fac=function(l){return new(l||t)};static \u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var M=o(9935),x=o(9797),P=o(776),i=o(7052);const n=(t,s)=>s.slug;function r(t,s){if(1&t&&e.nrm(0,"app-category-card",9),2&t){const a=s.$implicit,l=s.$index,b=e.XpG();e.ZvI("category-box ",b.categoryClasses(l),""),e.Y8G("categorySignal",a)("isLoadingSignal",b.loadingSignal())}}let c=(()=>{class t{facade=(0,e.WQX)(O);router=(0,e.WQX)(x.Ix);homePageSignal=this.facade.homePageSignal;loadingSignal=this.facade.loadingSignal;errorSignal=this.facade.errorSignal;backgroundImageSignal=(0,e.EWP)(()=>`url(${this.homePageSignal()?.banner.url})`);topCategoriesSignal=this.facade.topCategoriesSignal;topLoadingSignal=this.facade.topLoadingSignal;topErrorSignal=this.facade.topErrorSignal;categoryClasses(a){return["col-m-4 col-d-12","col-m-2 col-d-8","col-m-2 col-d-4"][a]||"col-m-12"}ngOnInit(){this.facade.loadHomePage(),this.facade.getTopCategories()}getCategoryBackgroundImage(a){return`${this.topCategoriesSignal()?.find(l=>l.slug===a)?.image?.url}`}onCategorySelection(a){this.router.navigate(["/","categories",a])}static \u0275fac=function(l){return new(l||t)};static \u0275cmp=e.VBU({type:t,selectors:[["app-home-page"]],decls:13,vars:4,consts:[[1,"banner-container"],[1,"banner-header"],[1,"lib-container","top-category-container"],[1,"top-category"],[1,"header"],["libLink","","size","medium","routerLink","/categories"],[1,"top-categories","grid"],[3,"categorySignal","isLoadingSignal","class"],[3,"isLoadingSignal"],[3,"categorySignal","isLoadingSignal"]],template:function(l,b){if(1&l&&(e.j41(0,"div",0)(1,"p",1),e.EFF(2),e.k0s()(),e.j41(3,"section",2)(4,"div",3)(5,"div",4),e.EFF(6,"Top categories"),e.k0s(),e.j41(7,"a",5),e.EFF(8,"Show all"),e.k0s()(),e.j41(9,"div",6),e.Z7z(10,r,1,5,"app-category-card",7,n),e.k0s()(),e.nrm(12,"app-loader",8)),2&l){let S;e.xc7("background-image",b.backgroundImageSignal()),e.R7$(2),e.JRh(null==(S=b.homePageSignal())?null:S.header),e.R7$(8),e.Dyx(b.topCategoriesSignal()),e.R7$(2),e.Y8G("isLoadingSignal",b.loadingSignal())}},dependencies:[M.g,x.iI,x.Wk,P.I,i.V],styles:[".banner-container[_ngcontent-%COMP%]{max-width:100dvw;height:60dvh;background-size:cover;background-position:center;display:flex;align-items:center;justify-content:flex-end;position:relative}.banner-header[_ngcontent-%COMP%]{max-width:50%;word-wrap:break-word;overflow-wrap:break-word;text-align:left;color:#fff;padding:.75rem 1.25rem;font-size:2.5rem;line-height:2}@media (min-width: 1024px){.banner-header[_ngcontent-%COMP%]{font-size:3.75rem;line-height:2}}.top-category-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-size:2rem;line-height:1.75}@media (min-width: 1024px){.top-category-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-size:2.5rem;line-height:1.75}}.top-category-container[_ngcontent-%COMP%]   .top-category[_ngcontent-%COMP%]{margin:1.5rem 0;display:flex;justify-content:space-between;align-items:center}.top-category-container[_ngcontent-%COMP%]   .top-categories[_ngcontent-%COMP%]{margin-bottom:1.5rem}.top-category-container[_ngcontent-%COMP%]   .top-categories[_ngcontent-%COMP%]   .category-box[_ngcontent-%COMP%]{height:30dvh}"],changeDetection:0})}return t})()},138:(y,p,o)=>{o.d(p,{$:()=>e});class e{static createImage(m){return{url:m.url,fileName:m.fileName}}}},7052:(y,p,o)=>{o.d(p,{V:()=>m});var e=o(4438);function h(u,f){1&u&&(e.j41(0,"div",0),e.nrm(1,"div",1),e.k0s())}let m=(()=>{class u{isLoadingSignal=(0,e.hFB)();isVisible=(0,e.EWP)(()=>this.isLoadingSignal());static \u0275fac=function(d){return new(d||u)};static \u0275cmp=e.VBU({type:u,selectors:[["app-loader"]],inputs:{isLoadingSignal:[1,"isLoadingSignal"]},decls:1,vars:1,consts:[[1,"loader-overlay"],[1,"spinner"]],template:function(d,g){1&d&&e.DNE(0,h,2,0,"div",0),2&d&&e.vxM(g.isVisible()?0:-1)},styles:[".loader-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fff;display:flex;align-items:center;justify-content:center;z-index:9999}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:5px solid #9e9e9e;border-top:5px solid #42a5f5;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"],changeDetection:0})}return u})()},2820:(y,p,o)=>{o.d(p,{P:()=>u});var e=o(6354),h=o(4438),m=o(1806);let u=(()=>{class f{apollo;constructor(d){this.apollo=d}query(d,g){return this.apollo.watchQuery({query:d,variables:g}).valueChanges.pipe((0,e.T)(v=>v.data))}static \u0275fac=function(g){return new(g||f)(h.KVO(m.Ic))};static \u0275prov=h.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})()},3981:(y,p,o)=>{o.d(p,{D:()=>m});var e=o(4438);const h=["*"];let m=(()=>{class u{disabled=!1;isLoading=!1;isHovered=!1;isClicked=!1;onMouseEnter(){this.disabled||(this.isHovered=!0)}onMouseLeave(){this.isHovered=!1,this.isClicked=!1}onMouseDown(){this.disabled||(this.isClicked=!0)}onMouseUp(){this.isClicked=!1}static \u0275fac=function(d){return new(d||u)};static \u0275cmp=e.VBU({type:u,selectors:[["lib-clickbox"]],hostVars:8,hostBindings:function(d,g){1&d&&e.bIt("mouseenter",function(){return g.onMouseEnter()})("mouseleave",function(){return g.onMouseLeave()})("mousedown",function(){return g.onMouseDown()})("mouseup",function(){return g.onMouseUp()}),2&d&&e.AVh("disabled",g.disabled)("loading",g.isLoading)("hovered",g.isHovered)("clicked",g.isClicked)},inputs:{disabled:"disabled",isLoading:"isLoading"},ngContentSelectors:h,decls:1,vars:0,template:function(d,g){1&d&&(e.NAR(),e.SdG(0))},styles:['[_nghost-%COMP%]{display:block;height:100%;min-height:100px;border-radius:.5rem;transition:box-shadow .3s ease,border .3s ease;background-color:#fff;cursor:pointer;position:relative}[_nghost-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--border-index, 1);border-radius:var(--radius, 8px);box-shadow:inset 0 0 0 2px #9e9e9e,0 1px 3px #0000001a}.loading[_nghost-%COMP%]{width:100%;height:100%;background:linear-gradient(90deg,#e0e0e0 25%,#bdbdbd,#e0e0e0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loadingAnimation 1.5s infinite;border-radius:.5rem}.hovered[_nghost-%COMP%]{position:relative}.hovered[_nghost-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--border-index, 1);border-radius:var(--radius, 8px);box-shadow:inset 0 0 0 2px #42a5f5,0 6px 12px #00000026}.clicked[_nghost-%COMP%]{position:relative}.clicked[_nghost-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--border-index, 1);border-radius:var(--radius, 8px);box-shadow:inset 0 0 0 2px #1e88e5,0 6px 12px #00000026}.disabled[_nghost-%COMP%]{cursor:not-allowed;opacity:.6;position:relative}.disabled[_nghost-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--border-index, 1);border-radius:var(--radius, 8px);box-shadow:inset 0 0 0 2px #bdbdbd,0 1px 3px #0000001a}@keyframes _ngcontent-%COMP%_loadingAnimation{0%{background-position:200% 0}to{background-position:-200% 0}}'],changeDetection:0})}return u})()},9079:(y,p,o)=>{o.d(p,{ZX:()=>P});var e=o(4438),h=o(1413),m=o(6697),u=o(6977);function P(i){return i?.injector||(0,e.Af3)(P),(0,e.ZcF)({...i,loader:n=>{const r=new h.B;return n.abortSignal.addEventListener("abort",()=>r.next()),new Promise((c,t)=>{i.loader(n).pipe((0,m.s)(1),(0,u.Q)(r)).subscribe({next:c,error:t,complete:()=>t(new Error("Resource completed before producing a value"))})})}})}}}]);