"use strict";(self.webpackChunkmill_shop=self.webpackChunkmill_shop||[]).push([[45],{8045:(T,d,a)=>{a.r(d),a.d(d,{ProductDetailsComponent:()=>k});var t=a(4438),p=a(9797),u=a(954),h=a(1413),g=a(3236),f=a(1985),S=a(9470);var w=a(9172),y=a(6354),M=a(6977);let F=(()=>{class n{countdownSignal=(0,t.vPA)({hours:0,minutes:0,seconds:0});destroy$=new h.B;ngOnInit(){this.startCountdown()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}startCountdown(){(function C(n=0,r=g.E){return n<0&&(n=0),function P(n=0,r,o=g.b){let e=-1;return null!=r&&((0,S.m)(r)?o=r:e=r),new f.c(i=>{let l=function v(n){return n instanceof Date&&!isNaN(n)}(n)?+n-o.now():n;l<0&&(l=0);let s=0;return o.schedule(function(){i.closed||(i.next(s++),0<=e?this.schedule(void 0,e):i.complete())},l)})}(n,n,r)})(1e3).pipe((0,w.Z)(0),(0,y.T)(()=>this.calculateTimeUntilMidnight()),(0,M.Q)(this.destroy$)).subscribe(o=>this.countdownSignal.set(o))}calculateTimeUntilMidnight(){const o=new Date,e=new Date;e.setHours(24,0,0,0);const i=e.getTime()-o.getTime();return{hours:Math.floor(i/36e5),minutes:Math.floor(i%36e5/6e4),seconds:Math.floor(i%6e4/1e3)}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=t.VBU({type:n,selectors:[["app-countdown-timer"]],decls:20,vars:3,consts:[[1,"countdown-timer"],[1,"timer-header"],[1,"timer-display"],[1,"time-box"],[1,"separator"]],template:function(e,i){1&e&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2,"Delivery tomorrow, if you order today!"),t.k0s(),t.j41(3,"div",2)(4,"span",3),t.EFF(5),t.j41(6,"small"),t.EFF(7,"H"),t.k0s()(),t.j41(8,"span",4),t.EFF(9,":"),t.k0s(),t.j41(10,"span",3),t.EFF(11),t.j41(12,"small"),t.EFF(13,"M"),t.k0s()(),t.j41(14,"span",4),t.EFF(15,":"),t.k0s(),t.j41(16,"span",3),t.EFF(17),t.j41(18,"small"),t.EFF(19,"S"),t.k0s()()()()),2&e&&(t.R7$(5),t.SpI(" ",i.countdownSignal().hours," "),t.R7$(6),t.SpI(" ",i.countdownSignal().minutes," "),t.R7$(6),t.SpI(" ",i.countdownSignal().seconds," "))},styles:[".countdown-timer[_ngcontent-%COMP%]{text-align:center}.timer-header[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5;text-align:left}@media (min-width: 1024px){.timer-header[_ngcontent-%COMP%]{font-size:1.25rem;line-height:1.5}}.timer-display[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.875rem;line-height:1.3}@media (min-width: 1024px){.timer-display[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5}}.time-box[_ngcontent-%COMP%]{background:#00796b;color:#fff;padding:.75rem 1rem;margin:.5rem 0;display:inline-block;text-align:center;width:30%;font-size:1.5rem;box-shadow:0 6px 12px #00000026}@media (min-width: 1024px){.time-box[_ngcontent-%COMP%]{font-size:2.5rem}}small[_ngcontent-%COMP%]{display:block;margin-top:.25rem;font-size:1rem;line-height:1.5}@media (min-width: 1024px){small[_ngcontent-%COMP%]{font-size:1.25rem;line-height:1.5}}.separator[_ngcontent-%COMP%]{font-size:2.5rem;color:#757575}"],changeDetection:0})}return n})();var x=a(5238),D=a(7052),b=a(9515),O=a(177),E=a(8516);const j=(n,r)=>r.slug;function z(n,r){if(1&n&&(t.j41(0,"div",5)(1,"div",12),t.EFF(2),t.nI1(3,"currency"),t.k0s(),t.nrm(4,"app-countdown-timer",13),t.j41(5,"lib-button",14),t.EFF(6,"Buy now"),t.k0s()()),2&n){let o;const e=t.XpG();t.R7$(2),t.JRh(t.i5U(3,1,null==(o=e.productDetailsSignal())?null:o.price,"EUR"))}}function R(n,r){if(1&n&&t.nrm(0,"app-product-card",9),2&n){const o=r.$implicit,e=t.XpG();t.Y8G("productSignal",o)("categorySlug",e.categorySlug())("isLoadingSignal",e.relatedProductsLoadingSignal())}}function $(n,r){if(1&n&&(t.j41(0,"div",10)(1,"div",15)(2,"div",16)(3,"div",12),t.EFF(4),t.nI1(5,"currency"),t.k0s(),t.j41(6,"lib-button",17),t.EFF(7,"Buy now"),t.k0s()(),t.nrm(8,"app-countdown-timer",13),t.k0s()()),2&n){let o;const e=t.XpG();t.R7$(4),t.JRh(t.i5U(5,1,null==(o=e.productDetailsSignal())?null:o.price,"EUR"))}}let k=(()=>{class n{route=(0,t.WQX)(p.nX);facade=(0,t.WQX)(u.x);bpService=(0,t.WQX)(E.dc);categorySlug=(0,t.vPA)("");productSlug=(0,t.vPA)("");productDetailsSignal=this.facade.productDetailsSignal;loadingSignal=this.facade.isLoadingSignal;errorSignal=this.facade.hasErrorSignal;relatedProductsSignal=this.facade.relatedProductsSignal;relatedProductsLoadingSignal=this.facade.relatedProductsLoadingSignal;relatedProductsErrorSignal=this.facade.relatedProductsErrorSignal;isDesktopSignal=this.bpService.isDesktop;ngOnInit(){this.categorySlug.set(this.route.snapshot.paramMap.get("categorySlug")??""),this.productSlug.set(this.route.snapshot.paramMap.get("productSlug")??""),this.facade.getProductDetails(this.categorySlug(),this.productSlug())}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=t.VBU({type:n,selectors:[["app-product-details"]],decls:17,vars:9,consts:[[1,"lib-container"],[1,"title"],[1,"grid","p-t-7"],[1,"product-image","col-m-2","col-d-4",3,"src","alt"],[1,"product-description","col-m-2","col-d-4"],[1,"price-wrapper","col-m-2","col-d-4"],[1,"related-products-wrapper"],[1,"header","col-m-4","col-d-12"],[1,"grid","p-b-4"],[1,"product-card","col-m-2","col-d-3",3,"productSignal","categorySlug","isLoadingSignal"],[1,"price-wrapper","price-wrapper--mobile"],[3,"isLoadingSignal"],[1,"price"],[1,"countdown-timer"],["size","large",1,"buy-button"],[1,"lib-container","price-container"],[1,"price-content"],["size","medium",1,"buy-button"]],template:function(e,i){if(1&e&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2),t.k0s(),t.j41(3,"div",2),t.nrm(4,"img",3),t.j41(5,"div",4)(6,"div"),t.EFF(7),t.k0s()(),t.DNE(8,z,7,4,"div",5),t.k0s(),t.j41(9,"section",6)(10,"div",7),t.EFF(11,"Related products"),t.k0s(),t.j41(12,"div",8),t.Z7z(13,R,1,3,"app-product-card",9,j),t.k0s()()(),t.DNE(15,$,9,4,"div",10),t.nrm(16,"app-loader",11)),2&e){let l,s,c,m;t.R7$(2),t.JRh(null==(l=i.productDetailsSignal())?null:l.name),t.R7$(2),t.FS9("alt",null==(s=i.productDetailsSignal())||null==s.image?null:s.image.fileName),t.Y8G("src",null==(c=i.productDetailsSignal())||null==c.image?null:c.image.url,t.B4B),t.R7$(3),t.JRh(null==(m=i.productDetailsSignal())?null:m.description),t.R7$(),t.vxM(i.isDesktopSignal()?8:-1),t.R7$(),t.AVh("related-products-wrapper--mobile",!i.isDesktopSignal()),t.R7$(4),t.Dyx(i.relatedProductsSignal()),t.R7$(2),t.vxM(i.isDesktopSignal()?-1:15),t.R7$(),t.Y8G("isLoadingSignal",i.loadingSignal())}},dependencies:[p.iI,F,x.V,b.Q,O.oe,D.V],styles:['.title[_ngcontent-%COMP%]{font-size:2.5rem;line-height:1.75}.product-image[_ngcontent-%COMP%]{height:30dvh;width:100%}.product-description[_ngcontent-%COMP%]{font-size:1.25rem;line-height:1.5}.price-wrapper[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column;gap:1rem;position:relative}.price-wrapper[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--border-index, 1);border-radius:var(--radius, 8px);box-shadow:inset 0 0 0 2px #9e9e9e,0 1px 3px #0000001a}.price-wrapper[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:#d00000;font-size:3rem;line-height:1.75}.price-wrapper--mobile[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%;height:150px;background-color:#fff;z-index:1000;box-shadow:0 6px 12px #00000026}.price-wrapper--mobile[_ngcontent-%COMP%]   .price-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:64px}.price-wrapper--mobile[_ngcontent-%COMP%]:before{box-shadow:none}.price-wrapper--mobile[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:#d00000;font-size:2.5rem;line-height:1.75}.related-products-wrapper[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin:1rem 0;font-size:2rem;line-height:1.75}@media (min-width: 1024px){.related-products-wrapper[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-size:2.5rem;line-height:1.75}}.related-products-wrapper--mobile[_ngcontent-%COMP%]{margin-bottom:150px}'],changeDetection:0})}return n})()}}]);