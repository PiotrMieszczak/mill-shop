"use strict";(self.webpackChunkmill_shop=self.webpackChunkmill_shop||[]).push([[76],{7653:(P,h,e)=>{e.d(h,{i:()=>l});var t=e(138);class l{static createCategory(i){return{name:i.name,slug:i.slug,image:t.$.createImage(i.image),productCount:i.product?i.product.length:0}}}},954:(P,h,e)=>{e.d(h,{x:()=>m});var t=e(4438),l=e(9079),d=e(6354),i=e(2820),y=e(1806);const u=y.J1`
  query GetProductsByCategory($slug: String!) {
    products(where: { category: { slug: $slug } }) {
      id
      slug
      name
      description
      price
      image {
        url
        fileName
      }
      category {
        slug
        name
      }
    }
  }
`,_=y.J1`
  query getProductDetails($productSlug: String!) {
    product(where: { slug: $productSlug }) {
      id
      slug
      name
      description
      price
      image {
        url
        fileName
      }
      category {
        slug
        name
      }
    }
  }
`,c=y.J1`
  query getRelatedProducts($categorySlug: String!, $productSlug: String!) {
    products(where: { category: { slug: $categorySlug }, slug_not: $productSlug }, first: 3) {
      slug
      name
      price
      description
      image {
        url
        fileName
      }
      category {
        slug
        name
      }
    }
  }
`;var f=e(138);class r{static createProduct(s){return{name:s.name,slug:s.slug,description:s.description,image:f.$.createImage(s.image),price:s.price,category:s.category}}}let p=(()=>{class n{graphql=(0,t.WQX)(i.P);getProductsByCategory(o){return this.graphql.query(u,{slug:o,fetchPolicy:"cache-first"}).pipe((0,d.T)(g=>g.products.map(r.createProduct)))}getProductDetails(o,g){return this.graphql.query(_,{categorySlug:o,productSlug:g,fetchPolicy:"cache-first"}).pipe((0,d.T)(b=>r.createProduct(b.product)))}getRelatedProducts(o,g){return this.graphql.query(c,{categorySlug:o,productSlug:g,fetchPolicy:"cache-first"}).pipe((0,d.T)(b=>b.products.map(r.createProduct)))}static \u0275fac=function(g){return new(g||n)};static \u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var a=e(7673);let m=(()=>{class n{productApiService=(0,t.WQX)(p);categorySlug=(0,t.vPA)("");productSlug=(0,t.vPA)("");productsSignal=(0,t.EWP)(()=>this.productsResource.value()||[]);categorySignal=(0,t.EWP)(()=>this.productsSignal().slice(0,1)[0]?.category||null);productDetailsSignal=(0,t.EWP)(()=>this.productDetailsResource.value());relatedProductsSignal=(0,t.EWP)(()=>this.relatedProductsResource.value()||[]);isLoadingSignal=(0,t.EWP)(()=>this.productsResource.isLoading()||this.productDetailsResource.isLoading());hasErrorSignal=(0,t.EWP)(()=>!!this.productsResource.error()||!!this.productDetailsResource.error());relatedProductsLoadingSignal=(0,t.EWP)(()=>this.relatedProductsResource.isLoading());relatedProductsErrorSignal=(0,t.EWP)(()=>this.relatedProductsResource.error());productsResource=(0,l.ZX)({request:()=>this.categorySlug(),loader:({request:o})=>o?this.productApiService.getProductsByCategory(o):(0,a.of)([])});productDetailsResource=(0,l.ZX)({request:()=>({category:this.categorySlug(),product:this.productSlug()}),loader:({request:o})=>o.category&&o.product?this.productApiService.getProductDetails(o.category,o.product):(0,a.of)(void 0)});relatedProductsResource=(0,l.ZX)({request:()=>({category:this.categorySlug(),product:this.productSlug()}),loader:({request:o})=>o.category&&o.product?this.productApiService.getRelatedProducts(o.category,o.product):(0,a.of)([])});getProductsByCategory(o){this.categorySlug.set(o)}getProductDetails(o,g){this.categorySlug.set(o),this.productSlug.set(g)}static \u0275fac=function(g){return new(g||n)};static \u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()},776:(P,h,e)=>{e.d(h,{I:()=>y});var t=e(4438),l=e(9797),d=e(3981),i=e(345);let y=(()=>{class u{router=(0,t.WQX)(l.Ix);sanitizer=(0,t.WQX)(i.up);categorySignal=(0,t.hFB)();isLoadingSignal=(0,t.hFB)(!1);backgroundImageSignal(){return this.sanitizer.bypassSecurityTrustUrl(`${this.categorySignal()?.image?.url||""}`)}onClick(){this.categorySignal()&&this.router.navigate(["/","categories",this.categorySignal()?.slug])}static \u0275fac=function(f){return new(f||u)};static \u0275cmp=t.VBU({type:u,selectors:[["app-category-card"]],inputs:{categorySignal:[1,"categorySignal"],isLoadingSignal:[1,"isLoadingSignal"]},decls:6,vars:5,consts:[[1,"category",3,"click","isLoading"],[1,"category-image",3,"src","alt"],[1,"category-name"],[1,"category-product-count"]],template:function(f,r){if(1&f&&(t.j41(0,"lib-clickbox",0),t.bIt("click",function(){return r.onClick()}),t.nrm(1,"img",1),t.j41(2,"div",2),t.EFF(3),t.k0s(),t.j41(4,"div",3),t.EFF(5),t.k0s()()),2&f){let p,a,m;t.Y8G("isLoading",r.isLoadingSignal()),t.R7$(),t.Y8G("src",r.backgroundImageSignal(),t.B4B)("alt",null==(p=r.categorySignal())?null:p.name),t.R7$(2),t.JRh(null==(a=r.categorySignal())?null:a.name),t.R7$(2),t.SpI("Check ",null==(m=r.categorySignal())?null:m.productCount," products")}},dependencies:[d.D],styles:[".category[_ngcontent-%COMP%]{width:100%;max-height:30vh;overflow:hidden}.category-name[_ngcontent-%COMP%]{position:absolute;top:10%;left:5%;font-weight:700;font-size:2rem;line-height:1.75}@media (min-width: 1024px){.category-name[_ngcontent-%COMP%]{font-size:2.5rem;line-height:1.75}}.category-product-count[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;background-color:#0a0a0a;color:#fff;padding:.25rem .5rem;border-radius:.25rem;font-weight:700;transform:translateY(100%);opacity:0;transition:opacity .3s ease-in-out,transform .3s ease-in-out;width:100%;height:50px;display:flex;justify-content:center;align-items:center;font-size:.875rem;line-height:1.3}@media (min-width: 1024px){.category-product-count[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5}}.category-image[_ngcontent-%COMP%]{display:block;min-width:auto;object-fit:cover;object-position:center center;position:absolute;top:0;left:0;width:100%;height:100%;border-radius:.75rem;transition:transform .3s ease-in-out}.category[_ngcontent-%COMP%]:hover   .category-image[_ngcontent-%COMP%]{transform:scale(1.2)}.category[_ngcontent-%COMP%]:hover   .category-product-count[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}"]})}return u})()},5238:(P,h,e)=>{e.d(h,{V:()=>_});var t=e(4438),l=e(9797),d=e(3981),i=e(9515),y=e(345),u=e(177);let _=(()=>{class c{router=(0,t.WQX)(l.Ix);sanitizer=(0,t.WQX)(y.up);productSignal=(0,t.hFB)();categorySlug=(0,t.hFB)();isLoadingSignal=(0,t.hFB)(!1);backgroundImageSignal(r){if(r)return this.sanitizer.bypassSecurityTrustUrl(r)}onClick(r){r&&this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate(["/categories",this.categorySlug(),"product",r]))}static \u0275fac=function(p){return new(p||c)};static \u0275cmp=t.VBU({type:c,selectors:[["app-product-card"]],inputs:{productSignal:[1,"productSignal"],categorySlug:[1,"categorySlug"],isLoadingSignal:[1,"isLoadingSignal"]},decls:9,vars:9,consts:[[1,"product-card",3,"click","isLoading"],[1,"product-card-image",3,"src","alt"],[1,"product-card-name"],[1,"product-card-price"],["type","primary",1,"product-card-button",3,"click"]],template:function(p,a){if(1&p&&(t.j41(0,"lib-clickbox",0),t.bIt("click",function(){let n;return a.onClick(null==(n=a.productSignal())?null:n.slug)}),t.nrm(1,"img",1),t.j41(2,"div",2),t.EFF(3),t.k0s(),t.j41(4,"div",3),t.EFF(5),t.nI1(6,"currency"),t.k0s(),t.j41(7,"lib-button",4),t.bIt("click",function(n){let s;return a.onClick(null==(s=a.productSignal())?null:s.slug),n.stopPropagation(),n.preventDefault()}),t.EFF(8," Show "),t.k0s()()),2&p){let m,n,s,o;t.Y8G("isLoading",a.isLoadingSignal()),t.R7$(),t.Y8G("src",a.backgroundImageSignal(null==(m=a.productSignal())||null==m.image?null:m.image.url),t.B4B)("alt",null==(n=a.productSignal())?null:n.name),t.R7$(2),t.JRh(null==(s=a.productSignal())?null:s.name),t.R7$(2),t.JRh(t.brH(6,5,null==(o=a.productSignal())?null:o.price,"EUR","symbol-narrow"))}},dependencies:[d.D,u.oe,i.Q],styles:[".product-card[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:1rem;padding:1rem;align-items:center}.product-card-name[_ngcontent-%COMP%]{font-weight:700;align-self:flex-start;font-size:.875rem;line-height:1.3}@media (min-width: 1024px){.product-card-name[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5}}.product-card-price[_ngcontent-%COMP%]{font-weight:700;align-self:flex-start;font-size:.875rem;line-height:1.3}@media (min-width: 1024px){.product-card-price[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5}}.product-card-image[_ngcontent-%COMP%]{display:block;min-width:auto;object-fit:contain;aspect-ratio:1/1;width:100%;max-height:80%;border-radius:.75rem}.product-card-button[_ngcontent-%COMP%]{width:80%}"]})}return c})()},9515:(P,h,e)=>{e.d(h,{Q:()=>d});var t=e(4438);const l=["*"];let d=(()=>{class i{type="primary";size="medium";static \u0275fac=function(_){return new(_||i)};static \u0275cmp=t.VBU({type:i,selectors:[["lib-button"]],hostVars:2,hostBindings:function(_,c){2&_&&t.BMQ("data-type",c.type)("data-size",c.size)},inputs:{type:"type",size:"size"},ngContentSelectors:l,decls:2,vars:0,consts:[[1,"lib-button"]],template:function(_,c){1&_&&(t.NAR(),t.j41(0,"button",0),t.SdG(1),t.k0s())},styles:['.lib-button[_ngcontent-%COMP%]{font-family:inherit;border:none;cursor:pointer;border-radius:.25rem;transition:.4s;transition-timing-function:ease-in-out;width:100%}[data-type=primary][_nghost-%COMP%]   .lib-button[_ngcontent-%COMP%]{background-color:#42a5f5;color:#fff;position:relative}[data-type=primary][_nghost-%COMP%]   .lib-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--border-index, 1);border-radius:var(--radius, 8px);box-shadow:#42a5f5,0 3px 6px #0000001f}[data-type=primary][_nghost-%COMP%]   .lib-button[_ngcontent-%COMP%]:hover{border:inset 0 0 0 2px #42a5f5;background-color:#1e88e5;box-shadow:0 6px 12px #00000026}[data-type=secondary][_nghost-%COMP%]   .lib-button[_ngcontent-%COMP%]{background-color:#009688;color:#fff;position:relative}[data-type=secondary][_nghost-%COMP%]   .lib-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--border-index, 1);border-radius:var(--radius, 8px);box-shadow:#009688,0 3px 6px #0000001f}[data-type=secondary][_nghost-%COMP%]   .lib-button[_ngcontent-%COMP%]:hover{border:inset 0 0 0 2px #42a5f5;background-color:#00796b;box-shadow:0 6px 12px #00000026}[data-type=success][_nghost-%COMP%]   .lib-button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;position:relative}[data-type=success][_nghost-%COMP%]   .lib-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--border-index, 1);border-radius:var(--radius, 8px);box-shadow:#4caf50,0 3px 6px #0000001f}[data-type=success][_nghost-%COMP%]   .lib-button[_ngcontent-%COMP%]:hover{border:inset 0 0 0 2px #42a5f5;box-shadow:0 6px 12px #00000026}[data-type=error][_nghost-%COMP%]   .lib-button[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;position:relative}[data-type=error][_nghost-%COMP%]   .lib-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--border-index, 1);border-radius:var(--radius, 8px);box-shadow:#f44336,0 3px 6px #0000001f}[data-type=error][_nghost-%COMP%]   .lib-button[_ngcontent-%COMP%]:hover{border:inset 0 0 0 2px #42a5f5;box-shadow:0 6px 12px #00000026}[data-size=small][_nghost-%COMP%]   .lib-button[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.75rem}[data-size=medium][_nghost-%COMP%]   .lib-button[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:1rem}[data-size=large][_nghost-%COMP%]   .lib-button[_ngcontent-%COMP%]{padding:.75rem 1.25rem;font-size:1.5rem}'],changeDetection:0})}return i})()}}]);